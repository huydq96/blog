<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Go Interview P1 | Huy Dang Blog</title>
<meta name="keywords" content="golang, interview">
<meta name="description" content="Một số câu hỏi phỏng vấn về Golang P1">
<meta name="author" content="Huy Dang Quang">
<link rel="canonical" href="https://blog.huydang.dev/posts/go-interview-p1/">
<link crossorigin="anonymous" href="../../assets/css/stylesheet.min.7da7716a1f2d0725f74c6ae7f8d6adafc43aabe2b366b65bfbf433448e2a2001.css" integrity="sha256-fadxah8tByX3TGrn&#43;Natr8Q6q&#43;KzZrZb&#43;/QzRI4qIAE=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.huydang.dev/favicon.ico">
<link rel="apple-touch-icon" href="https://blog.huydang.dev/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="https://blog.huydang.dev/posts/go-interview-p1/">

<meta name="twitter:title" content="Go Interview P1 | Huy Dang Blog" />
<meta name="twitter:description" content="Một số câu hỏi phỏng vấn về Golang P1" />
<meta property="og:title" content="Go Interview P1 | Huy Dang Blog" />
<meta property="og:description" content="Một số câu hỏi phỏng vấn về Golang P1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.huydang.dev/posts/go-interview-p1/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-05-26T09:40:49&#43;07:00" />
  <meta property="article:modified_time" content="2025-05-26T09:40:49&#43;07:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.huydang.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Go Interview P1",
      "item": "https://blog.huydang.dev/posts/go-interview-p1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Go Interview P1 | Huy Dang Blog",
  "name": "Go Interview P1",
  "description": "Một số câu hỏi phỏng vấn về Golang P1",
  "keywords": [
    "golang", "interview"
  ],
  "wordCount" : "2084",
  "inLanguage": "en",
  "datePublished": "2025-05-26T09:40:49+07:00",
  "dateModified": "2025-05-26T09:40:49+07:00",
  "author":{
    "@type": "Person",
    "name": "Huy Dang Quang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.huydang.dev/posts/go-interview-p1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Huy Dang Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.huydang.dev/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.huydang.dev/" accesskey="h" title="Huy Dang Blog (Alt + H)">Huy Dang Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.huydang.dev/posts/" title="Posts" class="active"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://blog.huydang.dev/categories/" title="Categories"
                >Categories
                </a>
            </li>
            <li>
                <a href="https://blog.huydang.dev/tags/" title="Tags"
                >Tags
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Go Interview P1</h1>
    <div class="post-description">Một số câu hỏi phỏng vấn về Golang P1</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>May 26, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://blog.huydang.dev/tags/golang/">Golang</a><a href="https://blog.huydang.dev/tags/interview/">Interview</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>10 min</span></span>

      
      
    </div>
  </header> <div class="toc side right">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#gi%e1%ba%a3i-th%c3%adch-kh%c3%a1i-ni%e1%bb%87m-v%e1%bb%81-channels-trong-go-khi-n%c3%a0o-v%c3%a0-t%e1%ba%a1i-sao-b%e1%ba%a1n-s%e1%ba%bd-s%e1%bb%ad-d%e1%bb%a5ng-ch%c3%bang-" aria-label="Giải thích khái niệm về channels trong Go. Khi nào và tại sao bạn sẽ sử dụng chúng ?">Giải thích khái niệm về channels trong Go. Khi nào và tại sao bạn sẽ sử dụng chúng ?</a><ul>
                        
                <li>
                    <a href="#kh%c3%a1i-ni%e1%bb%87m-v%c3%a0-%e1%bb%a9ng-d%e1%bb%a5ng-c%e1%bb%a7a-channels-trong-go" aria-label="Khái niệm và ứng dụng của Channels trong Go">Khái niệm và ứng dụng của Channels trong Go</a></li>
                <li>
                    <a href="#ho%e1%ba%a1t-%c4%91%e1%bb%99ng-c%e1%bb%a7a-channels" aria-label="Hoạt động của Channels">Hoạt động của Channels</a><ul>
                        
                <li>
                    <a href="#g%e1%bb%adinh%e1%ba%adn-d%e1%bb%af-li%e1%bb%87u" aria-label="Gửi/nhận dữ liệu">Gửi/nhận dữ liệu</a></li>
                <li>
                    <a href="#select-statement" aria-label="Select statement">Select statement</a></li></ul>
                </li>
                <li>
                    <a href="#khi-n%c3%a0o-s%e1%bb%ad-d%e1%bb%a5ng-channels-" aria-label="Khi nào sử dụng Channels ?">Khi nào sử dụng Channels ?</a><ul>
                        
                <li>
                    <a href="#c%c3%a1c-m%c3%b4-h%c3%acnh-%e1%bb%a9ng-d%e1%bb%a5ng" aria-label="Các mô hình ứng dụng">Các mô hình ứng dụng</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#l%c3%a0m-th%e1%ba%bf-n%c3%a0o-%c4%91%e1%bb%83-qu%e1%ba%a3n-l%c3%bd-goroutines-v%c3%a0-tr%c3%a1nh-memory-leaks-" aria-label="Làm thế nào để quản lý goroutines và tránh memory leaks ?">Làm thế nào để quản lý goroutines và tránh memory leaks ?</a><ul>
                        
                <li>
                    <a href="#nguy%c3%aan-nh%c3%a2n-g%c3%a2y-r%c3%b2-r%e1%bb%89-goroutine" aria-label="Nguyên nhân gây rò rỉ Goroutine">Nguyên nhân gây rò rỉ Goroutine</a></li>
                <li>
                    <a href="#ph%c3%b2ng-tr%c3%a1nh-r%c3%b2-r%e1%bb%89-goroutines" aria-label="Phòng tránh rò rỉ Goroutines">Phòng tránh rò rỉ Goroutines</a></li></ul>
                </li>
                <li>
                    <a href="#l%c3%a0m-th%e1%ba%bf-n%c3%a0o-%c4%91%e1%bb%83-d%e1%bb%abng-m%e1%bb%99t-goroutine-%c4%91ang-ch%e1%ba%a1y-" aria-label="Làm thế nào để dừng một goroutine đang chạy ?">Làm thế nào để dừng một goroutine đang chạy ?</a><ul>
                        
                <li>
                    <a href="#s%e1%bb%ad-d%e1%bb%a5ng-channel-t%c3%adn-hi%e1%bb%87u-d%e1%bb%abng" aria-label="Sử dụng Channel tín hiệu dừng">Sử dụng Channel tín hiệu dừng</a></li>
                <li>
                    <a href="#s%e1%bb%ad-d%e1%bb%a5ng-contextwithcancel" aria-label="Sử dụng Context.WithCancel">Sử dụng <code>Context.WithCancel</code></a></li>
                <li>
                    <a href="#%c4%91%c3%b3ng-channel-%c4%91%e1%ba%a7u-v%c3%a0o" aria-label="Đóng Channel đầu vào">Đóng Channel đầu vào</a></li>
                <li>
                    <a href="#s%e1%bb%ad-d%e1%bb%a5ng-timeout" aria-label="Sử dụng Timeout">Sử dụng Timeout</a></li>
                <li>
                    <a href="#so-s%c3%a1nh-c%c3%a1c-ph%c6%b0%c6%a1ng-ph%c3%a1p" aria-label="So sánh các phương pháp">So sánh các phương pháp</a></li>
                <li>
                    <a href="#v%c3%ad-d%e1%bb%a5-k%e1%ba%bft-h%e1%bb%a3p-context-v%c3%a0-waitgroup" aria-label="Ví dụ kết hợp context và WaitGroup">Ví dụ kết hợp <code>context</code> và <code>WaitGroup</code></a></li></ul>
                </li>
                <li>
                    <a href="#gi%e1%ba%a3i-th%c3%adch-v%e1%bb%81-interfaces-trong-go-v%c3%a0-c%c3%a1ch-ch%c3%bang-kh%c3%a1c-v%e1%bb%9bi-interfaces-trong-c%c3%a1c-ng%c3%b4n-ng%e1%bb%af-oop-kh%c3%a1c" aria-label="Giải thích về interfaces trong Go và cách chúng khác với interfaces trong các ngôn ngữ OOP khác">Giải thích về interfaces trong Go và cách chúng khác với interfaces trong các ngôn ngữ OOP khác</a><ul>
                        
                <li>
                    <a href="#%c4%91%e1%bb%8bnh-ngh%c4%a9a-v%c3%a0-c%c6%a1-ch%e1%ba%bf-ho%e1%ba%a1t-%c4%91%e1%bb%99ng" aria-label="Định nghĩa và cơ chế hoạt động">Định nghĩa và cơ chế hoạt động</a><ul>
                        
                <li>
                    <a href="#empty-interface-interface" aria-label="Empty Interface (interface{})">Empty Interface (interface{})</a></li></ul>
                </li>
                <li>
                    <a href="#so-s%c3%a1nh-v%e1%bb%9bi-interface-trong-ng%c3%b4n-ng%e1%bb%af-oop" aria-label="So sánh với Interface trong ngôn ngữ OOP">So sánh với Interface trong ngôn ngữ OOP</a></li>
                <li>
                    <a href="#%c6%b0u-v%c3%a0-nh%c6%b0%e1%bb%a3c-%c4%91i%e1%bb%83m" aria-label="Ưu và nhược điểm">Ưu và nhược điểm</a></li>
                <li>
                    <a href="#k%e1%ba%bft-lu%e1%ba%adn" aria-label="Kết luận">Kết luận</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="giải-thích-khái-niệm-về-channels-trong-go-khi-nào-và-tại-sao-bạn-sẽ-sử-dụng-chúng-">Giải thích khái niệm về channels trong Go. Khi nào và tại sao bạn sẽ sử dụng chúng ?<a hidden class="anchor" aria-hidden="true" href="#giải-thích-khái-niệm-về-channels-trong-go-khi-nào-và-tại-sao-bạn-sẽ-sử-dụng-chúng-">¶</a></h1>
<h2 id="khái-niệm-và-ứng-dụng-của-channels-trong-go">Khái niệm và ứng dụng của Channels trong Go<a hidden class="anchor" aria-hidden="true" href="#khái-niệm-và-ứng-dụng-của-channels-trong-go">¶</a></h2>
<p>Channels là một trong những cơ chế concurrency mạnh mẽ nhất trong Go, được thiết kế để quản lý giao tiếp và đồng bộ hóa giữa các goroutine. Chúng đóng vai trò trung tâm trong việc xây dựng các hệ thống phân tán, pipeline xử lý dữ liệu, và các mô hình đồng thời phức tạp.</p>
<p>Channel được biểu diễn bằng struct hchan trong runtime Go:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">hchan</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">qcount</span>   <span class="kt">uint</span>           <span class="c1">// Số phần tử hiện có
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">dataqsiz</span> <span class="kt">uint</span>           <span class="c1">// Kích thước buffer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">buf</span>      <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span> <span class="c1">// Vùng nhớ buffer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">sendx</span>    <span class="kt">uint</span>           <span class="c1">// Vị trí gửi tiếp theo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">recvx</span>    <span class="kt">uint</span>           <span class="c1">// Vị trí nhận tiếp theo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">lock</span>     <span class="nx">mutex</span>          <span class="c1">// Mutex đảm bảo thread-safe
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Cấu trúc này sử dụng hàng đợi vòng (circular queue) để quản lý dữ liệu và mutex để đồng bộ truy cập</p>
<h2 id="hoạt-động-của-channels">Hoạt động của Channels<a hidden class="anchor" aria-hidden="true" href="#hoạt-động-của-channels">¶</a></h2>
<h3 id="gửinhận-dữ-liệu">Gửi/nhận dữ liệu<a hidden class="anchor" aria-hidden="true" href="#gửinhận-dữ-liệu">¶</a></h3>
<ul>
<li><strong>Gửi dữ liệu</strong>: <strong>ch &lt;- value</strong> block goroutine nếu channel đầy (buffered) hoặc chưa có receiver (unbuffered)</li>
<li><strong>Nhận dữ liệu</strong>: <strong>value := &lt;-ch</strong> block goroutine nếu channel rỗng</li>
<li><strong>Đóng channel</strong>: <strong>close(ch)</strong> đánh dấu không còn dữ liệu gửi đi. Một kênh đã đóng vẫn cho phép đọc dữ liệu từ nó nhưng không thể truyền dữ liệu đến nó (gây ra panic).</li>
</ul>
<h3 id="select-statement">Select statement<a hidden class="anchor" aria-hidden="true" href="#select-statement">¶</a></h3>
<p>Cơ chế <code>select</code> cho phép chờ nhiều channel cùng lúc, xử lý trường hợp đầu tiên sẵn sàng</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nx">msg</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">ch1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Nhận từ ch1:&#34;</span><span class="p">,</span> <span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nx">ch2</span> <span class="o">&lt;-</span> <span class="s">&#34;data&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Gửi thành công vào ch2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Không có hoạt động nào sẵn sàng&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>select</code> thường được dùng để triển khai timeout hoặc non-blocking operations.</p>
<ul>
<li>Xem thêm: <a href="https://blog.huydang.dev/posts/go-concurrency/#channels">Go Channels</a></li>
</ul>
<h2 id="khi-nào-sử-dụng-channels-">Khi nào sử dụng Channels ?<a hidden class="anchor" aria-hidden="true" href="#khi-nào-sử-dụng-channels-">¶</a></h2>
<p>Channels hợp cho các bài toán yêu cầu giao tiếp phức tạp giữa các goroutine, phân tải công việc, hoặc xử lý luồng dữ liệu theo pipeline.</p>
<ul>
<li>
<p>Ưu điểm:</p>
<ul>
<li>An toàn đồng thời: Loại bỏ race conditions thông qua cơ chế truyền thông điệp thay vì chia sẻ bộ nhớ.</li>
<li>Linh hoạt: Hỗ trợ đa dạng mô hình (pipeline, pub/sub, worker pools).</li>
<li>Tích hợp sâu với runtime: Tối ưu hiệu năng nhờ quản lý trực tiếp bởi Go scheduler.</li>
</ul>
</li>
<li>
<p>Hạn chế:</p>
<ul>
<li>Deadlock tiềm ẩn: Nếu không đóng channel hoặc xử lý block không đúng cách.</li>
<li>Overhead cho simple tasks: Đôi khi mutex đơn giản hơn cho các tác vụ đơn lẻ.</li>
</ul>
</li>
<li>
<p>So Sánh Với Mutex</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Tiêu Chí</th>
<th>Channels</th>
<th>Mutex</th>
</tr>
</thead>
<tbody>
<tr>
<td>Phạm Vi</td>
<td>Giao tiếp giữa goroutines</td>
<td>Bảo vệ truy cập tài nguyên</td>
</tr>
<tr>
<td>Độ Phức Tạp</td>
<td>Cao (cần quản lý vòng đời)</td>
<td>Thấp</td>
</tr>
<tr>
<td>Phù Hợp</td>
<td>Pipeline, phân tác vụ phức tạp</td>
<td>Critical section đơn giản</td>
</tr>
</tbody>
</table>
<h3 id="các-mô-hình-ứng-dụng">Các mô hình ứng dụng<a hidden class="anchor" aria-hidden="true" href="#các-mô-hình-ứng-dụng">¶</a></h3>
<ol>
<li>Đồng bộ hóa Goroutines</li>
</ol>
<p>Channels giải quyết vấn đề race conditions bằng cách thay thế mutex truyền thống. Ví dụ, đảm bảo một goroutine chỉ chạy sau khi goroutine khác hoàn thành</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">done</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">bool</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Xử lý tác vụ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">done</span> <span class="o">&lt;-</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;-</span><span class="nx">done</span> <span class="c1">// Block cho đến khi nhận tín hiệu
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Pipeline xử lý dữ liệu</li>
</ol>
<p>Kết hợp nhiều giai đoạn xử lý, mỗi giai đoạn là một goroutine độc lập</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Giai đoạn 1: Tạo số nguyên
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">generator</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">()</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">i</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">ch</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Giai đoạn 2: Bình phương
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">squares</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">in</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">out</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">in</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">out</span> <span class="o">&lt;-</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nb">close</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">out</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Kết hợp pipeline
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="k">range</span> <span class="nf">squares</span><span class="p">(</span><span class="nf">generator</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="c1">// 0, 1, 4, 9, 16
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Mô hình Fan-Out/Fan-In</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">jobs</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">results</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Khởi động 3 worker
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">w</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">w</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">w</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">jobs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">results</span> <span class="o">&lt;-</span> <span class="nx">j</span> <span class="o">*</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}(</span><span class="nx">w</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Gửi 5 jobs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">jobs</span> <span class="o">&lt;-</span> <span class="nx">j</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">close</span><span class="p">(</span><span class="nx">jobs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Thu thập kết quả
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">a</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">a</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">&lt;-</span><span class="nx">results</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 2
</span></span></span><span class="line"><span class="cl"><span class="c1">// 4
</span></span></span><span class="line"><span class="cl"><span class="c1">// 6
</span></span></span><span class="line"><span class="cl"><span class="c1">// 8
</span></span></span><span class="line"><span class="cl"><span class="c1">// 10
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>Semaphore và Rate limiting</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">sem</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kd">struct</span><span class="p">{},</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// Giới hạn 3 goroutines
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sem</span> <span class="o">&lt;-</span> <span class="kd">struct</span><span class="p">{}{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="o">&lt;-</span><span class="nx">sem</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Xử lý tác vụ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}(</span><span class="nx">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="làm-thế-nào-để-quản-lý-goroutines-và-tránh-memory-leaks-">Làm thế nào để quản lý goroutines và tránh memory leaks ?<a hidden class="anchor" aria-hidden="true" href="#làm-thế-nào-để-quản-lý-goroutines-và-tránh-memory-leaks-">¶</a></h1>
<h2 id="nguyên-nhân-gây-rò-rỉ-goroutine">Nguyên nhân gây rò rỉ Goroutine<a hidden class="anchor" aria-hidden="true" href="#nguyên-nhân-gây-rò-rỉ-goroutine">¶</a></h2>
<ol>
<li>Channel blocking vĩnh viễn</li>
</ol>
<ul>
<li>Unbuffered channel yêu cầu cả sender và receiver sẵn sàng. Nếu một bên không tồn tại, goroutine sẽ bị chặn mãi mãi.</li>
<li>Buffered channel đầy: Khi buffer đã đầy, sender bị chặn cho đến khi có receiver.</li>
</ul>
<ol start="2">
<li>Vòng lặp vô hạn thiếu điều kiện thoát</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span> <span class="c1">// Không có điều kiện thoát
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Running...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Sử dụng Context không đúng cách</li>
</ol>
<p>Không hủy context khi goroutine không còn cần thiết:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithCancel</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nf">cancel</span><span class="p">()</span> <span class="c1">// Nếu quên gọi cancel()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span> <span class="c1">// Không bao giờ nhận tín hiệu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="phòng-tránh-rò-rỉ-goroutines">Phòng tránh rò rỉ Goroutines<a hidden class="anchor" aria-hidden="true" href="#phòng-tránh-rò-rỉ-goroutines">¶</a></h2>
<ol>
<li>Sử Dụng Context hủy tác vụ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithTimeout</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="mi">5</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nf">cancel</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="c1">// Thoát khi hết thời gian
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">case</span> <span class="nx">data</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">ch</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">process</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Đảm bảo đóng Channel đúng cách</li>
</ol>
<ul>
<li>Sender đóng channel sau khi gửi xong:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">i</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Sử dụng <code>select</code> với <code>default</code> để tránh block</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nx">msg</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">ch</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">handle</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Không block nếu không có dữ liệu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>Giới hạn số lượng Goroutine với Semaphore</li>
</ol>
<ul>
<li>Sử dụng buffered channel làm semaphore:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">sem</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kd">struct</span><span class="p">{},</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">// Tối đa 10 goroutines
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sem</span> <span class="o">&lt;-</span> <span class="kd">struct</span><span class="p">{}{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="o">&lt;-</span><span class="nx">sem</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">        <span class="nf">processTask</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}(</span><span class="nx">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>Tránh Capture biến vòng lặp</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i</span> <span class="o">:=</span> <span class="nx">i</span> <span class="c1">// Tạo bản sao
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="làm-thế-nào-để-dừng-một-goroutine-đang-chạy-">Làm thế nào để dừng một goroutine đang chạy ?<a hidden class="anchor" aria-hidden="true" href="#làm-thế-nào-để-dừng-một-goroutine-đang-chạy-">¶</a></h1>
<h2 id="sử-dụng-channel-tín-hiệu-dừng">Sử dụng Channel tín hiệu dừng<a hidden class="anchor" aria-hidden="true" href="#sử-dụng-channel-tín-hiệu-dừng">¶</a></h2>
<p>Tạo một channel để gửi tín hiệu dừng đến goroutine. Goroutine sẽ kiểm tra channel này định kỳ và thoát khi nhận được tín hiệu:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">quit</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">bool</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">quit</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Thực hiện công việc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Gửi tín hiệu dừng
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">quit</span> <span class="o">&lt;-</span> <span class="kc">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="sử-dụng-contextwithcancel">Sử dụng <code>Context.WithCancel</code><a hidden class="anchor" aria-hidden="true" href="#sử-dụng-contextwithcancel">¶</a></h2>
<p>Context cung cấp cơ chế hủy bỏ lan truyền, cho phép hủy nhiều goroutine cùng lúc:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithCancel</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Thực hiện công việc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Hủy tất cả goroutine sử dụng context này
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">cancel</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="đóng-channel-đầu-vào">Đóng Channel đầu vào<a hidden class="anchor" aria-hidden="true" href="#đóng-channel-đầu-vào">¶</a></h2>
<p>Khi goroutine đang đọc từ một channel, việc đóng channel sẽ khiến vòng lặp range tự động thoát:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">jobs</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">job</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">jobs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Xử lý job
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Đóng channel để dừng goroutine
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nb">close</span><span class="p">(</span><span class="nx">jobs</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="sử-dụng-timeout">Sử dụng Timeout<a hidden class="anchor" aria-hidden="true" href="#sử-dụng-timeout">¶</a></h2>
<p>Kết hợp <code>select</code> với <code>time.After</code> để tự động hủy sau khoảng thời gian nhất định:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">time</span><span class="p">.</span><span class="nf">After</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Thực hiện công việc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="so-sánh-các-phương-pháp">So sánh các phương pháp<a hidden class="anchor" aria-hidden="true" href="#so-sánh-các-phương-pháp">¶</a></h2>
<table>
<thead>
<tr>
<th>Phương pháp</th>
<th>Ưu điểm</th>
<th>Nhược điểm</th>
</tr>
</thead>
<tbody>
<tr>
<td>Channel tín hiệu dừng</td>
<td>Đơn giản, dễ triển khai</td>
<td>Khó quản lý với nhiều goroutine</td>
</tr>
<tr>
<td>Context</td>
<td>Hủy lan truyền, tích hợp sẵn</td>
<td>Cần truyền context qua nhiều tầng</td>
</tr>
<tr>
<td>Đóng Channel</td>
<td>Tự động thoát vòng lặp range</td>
<td>Chỉ áp dụng khi đọc từ channel</td>
</tr>
<tr>
<td>Timeout</td>
<td>Tự động dừng sau thời gian cố định</td>
<td>Không linh hoạt cho các tác vụ dài</td>
</tr>
</tbody>
</table>
<h2 id="ví-dụ-kết-hợp-context-và-waitgroup">Ví dụ kết hợp <code>context</code> và <code>WaitGroup</code><a hidden class="anchor" aria-hidden="true" href="#ví-dụ-kết-hợp-context-và-waitgroup">¶</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">worker</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">wg</span> <span class="o">*</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Nhận tín hiệu dừng&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Đang làm việc...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithCancel</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="nf">worker</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">wg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cancel</span><span class="p">()</span> <span class="c1">// Gửi tín hiệu dừng
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Tất cả goroutine đã dừng&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="giải-thích-về-interfaces-trong-go-và-cách-chúng-khác-với-interfaces-trong-các-ngôn-ngữ-oop-khác">Giải thích về interfaces trong Go và cách chúng khác với interfaces trong các ngôn ngữ OOP khác<a hidden class="anchor" aria-hidden="true" href="#giải-thích-về-interfaces-trong-go-và-cách-chúng-khác-với-interfaces-trong-các-ngôn-ngữ-oop-khác">¶</a></h1>
<p><strong>Interfaces</strong> là một trong những tính năng cốt lõi của Go, thiết kế để xử lý tính đa hình (<strong>polymorphism</strong>) theo cách tối giản và linh hoạt.</p>
<h2 id="định-nghĩa-và-cơ-chế-hoạt-động">Định nghĩa và cơ chế hoạt động<a hidden class="anchor" aria-hidden="true" href="#định-nghĩa-và-cơ-chế-hoạt-động">¶</a></h2>
<p>Một interface trong Go định nghĩa tập hợp các <strong>method signatures</strong> (chữ ký phương thức) mà một kiểu dữ liệu phải triển khai. Ví dụ:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Writer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Implicit Implementation</strong>: Bất kỳ kiểu nào (struct, kiểu tự định nghĩa, v.v.) có phương thức <strong>Write</strong> sẽ tự động triển khai interface <strong>Writer</strong> mà không cần khai báo tường minh.</li>
<li><strong>Structural Typing</strong>: Interface xác định hành vi thông qua cấu trúc phương thức, không qua tên kiểu.</li>
</ul>
<h3 id="empty-interface-interface">Empty Interface (interface{})<a hidden class="anchor" aria-hidden="true" href="#empty-interface-interface">¶</a></h3>
<ul>
<li>Đại diện cho mọi kiểu dữ liệu vì không yêu cầu phương thức nào:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">any</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span>  <span class="c1">// Hợp lệ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">any</span> <span class="p">=</span> <span class="mi">42</span>                       <span class="c1">// Hợp lệ
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Thường dùng cho xử lý dữ liệu động (JSON decoding, generic containers).</li>
</ul>
<h2 id="so-sánh-với-interface-trong-ngôn-ngữ-oop">So sánh với Interface trong ngôn ngữ OOP<a hidden class="anchor" aria-hidden="true" href="#so-sánh-với-interface-trong-ngôn-ngữ-oop">¶</a></h2>
<ol>
<li>Implicit vs. Explicit Implementation</li>
</ol>
<table>
<thead>
<tr>
<th>Đặc Điểm</th>
<th>Go</th>
<th>Java</th>
</tr>
</thead>
<tbody>
<tr>
<td>Khai báo triển khai</td>
<td>Không cần (implicit)</td>
<td>Bắt buộc (implements)</td>
</tr>
<tr>
<td>Liên kết</td>
<td>Tách biệt interface và triển khai</td>
<td>Interface và class phụ thuộc trực tiếp</td>
</tr>
<tr>
<td>Ví dụ</td>
<td>type T struct{}; func (T) F() {}</td>
<td>class T implements I { &hellip; }</td>
</tr>
</tbody>
</table>
<ul>
<li>Ưu điểm Go: Giảm coupling, cho phép thêm interface cho kiểu có sẵn.</li>
<li>Nhược điểm: Khó theo dõi triển khai interface trong mã nguồn lớn.</li>
</ul>
<ol start="2">
<li>Phương thức mặc định (Default Methods)</li>
</ol>
<ul>
<li><strong>Java</strong>: Từ Java 8, interface có thể chứa phương thức mặc định:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">interface</span> <span class="nc">Animal</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sound</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Default sound&#34;</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Go</strong>: Không hỗ trợ. Mọi phương thức trong interface đều trừu tượng.</li>
</ul>
<ol start="3">
<li>Kế Thừa và Composition</li>
</ol>
<ul>
<li>Go: Cho phép <strong>embedding interfaces</strong> để kết hợp phương thức:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ReadWriter</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Reader</span>  <span class="c1">// Nhúng interface Reader
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Writer</span>  <span class="c1">// Nhúng interface Writer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Java: Kế thừa interface qua <code>extends</code></li>
</ul>
<h2 id="ưu-và-nhược-điểm">Ưu và nhược điểm<a hidden class="anchor" aria-hidden="true" href="#ưu-và-nhược-điểm">¶</a></h2>
<ul>
<li>
<p>Ưu điểm của Go:</p>
<ul>
<li><strong>Linh hoạt</strong>: Thêm interface mới không cần sửa code hiện có.</li>
<li><strong>Giảm boilerplate</strong>: Không cần từ khóa implements.</li>
<li><strong>Duck typing an toàn</strong>: Kiểm tra phương thức lúc biên dịch.</li>
</ul>
</li>
<li>
<p>Nhược điểm:</p>
<ul>
<li><strong>Khó debug</strong>: Khó xác định kiểu nào triển khai interface trong codebase lớn.</li>
<li><strong>Thiếu phương thức mặc định</strong>: Không thể chia sẻ logic chung giữa các triển khai.</li>
</ul>
</li>
</ul>
<h2 id="kết-luận">Kết luận<a hidden class="anchor" aria-hidden="true" href="#kết-luận">¶</a></h2>
<p>Interfaces trong Go tập trung vào <strong>hành vi</strong> thay vì <strong>kế thừa</strong>. Khác biệt chính so với các ngôn ngữ OOP truyền thống nằm ở:</p>
<ul>
<li><strong>Implicit implementation</strong> giúp code linh hoạt, ít phụ thuộc.</li>
<li><strong>Structural typing</strong> cho phép đa hình mà không cần hệ thống phân cấp phức tạp.</li>
<li><strong>Đơn giản</strong> với việc chỉ định nghĩa method signatures.</li>
</ul>


  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2025 <a href="https://blog.huydang.dev/">Huy Dang Blog</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="../../js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
