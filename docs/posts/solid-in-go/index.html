<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Solid in Go | Huy Dang Blog</title>
<meta name="keywords" content="golang, coding, design pattern">
<meta name="description" content="Nguyên tắc SOLID với các ví dụ trong Go">
<meta name="author" content="Huy Dang Quang">
<link rel="canonical" href="https://blog.huydang.dev/posts/solid-in-go/">
<link crossorigin="anonymous" href="../../assets/css/stylesheet.min.7da7716a1f2d0725f74c6ae7f8d6adafc43aabe2b366b65bfbf433448e2a2001.css" integrity="sha256-fadxah8tByX3TGrn&#43;Natr8Q6q&#43;KzZrZb&#43;/QzRI4qIAE=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.huydang.dev/favicon.ico">
<link rel="apple-touch-icon" href="https://blog.huydang.dev/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="https://blog.huydang.dev/posts/solid-in-go/">

<meta name="twitter:title" content="Solid in Go | Huy Dang Blog" />
<meta name="twitter:description" content="Nguyên tắc SOLID với các ví dụ trong Go" />
<meta property="og:title" content="Solid in Go | Huy Dang Blog" />
<meta property="og:description" content="Nguyên tắc SOLID với các ví dụ trong Go" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.huydang.dev/posts/solid-in-go/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2025-05-04T22:00:00&#43;07:00" />
  <meta property="article:modified_time" content="2025-05-04T22:00:00&#43;07:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.huydang.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Solid in Go",
      "item": "https://blog.huydang.dev/posts/solid-in-go/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Solid in Go | Huy Dang Blog",
  "name": "Solid in Go",
  "description": "Nguyên tắc SOLID với các ví dụ trong Go",
  "keywords": [
    "golang", "coding", "design pattern"
  ],
  "wordCount" : "965",
  "inLanguage": "en",
  "datePublished": "2025-05-04T22:00:00+07:00",
  "dateModified": "2025-05-04T22:00:00+07:00",
  "author":{
    "@type": "Person",
    "name": "Huy Dang Quang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.huydang.dev/posts/solid-in-go/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Huy Dang Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.huydang.dev/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.huydang.dev/" accesskey="h" title="Huy Dang Blog (Alt + H)">Huy Dang Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.huydang.dev/posts/" title="Posts" class="active"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://blog.huydang.dev/categories/" title="Categories"
                >Categories
                </a>
            </li>
            <li>
                <a href="https://blog.huydang.dev/tags/" title="Tags"
                >Tags
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Solid in Go</h1>
    <div class="post-description">Nguyên tắc SOLID với các ví dụ trong Go</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>May 4, 2025</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://blog.huydang.dev/tags/golang/">Golang</a><a href="https://blog.huydang.dev/tags/coding/">Coding</a><a href="https://blog.huydang.dev/tags/design-pattern/">Design Pattern</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>5 min</span></span>

      
      
    </div>
  </header> <div class="toc side right">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#solid" aria-label="SOLID">SOLID</a><ul>
                        
                <li>
                    <a href="#s--single-responsibility-principle-srp" aria-label="S – Single Responsibility Principle (SRP)"><strong>S</strong> – Single Responsibility Principle (SRP)</a><ul>
                        
                <li>
                    <a href="#%c4%91%e1%bb%8dc-th%c3%aam" aria-label="Đọc thêm">Đọc thêm</a></li></ul>
                </li>
                <li>
                    <a href="#o--open-closed-principle" aria-label="O – Open-closed Principle"><strong>O</strong> – Open-closed Principle</a></li>
                <li>
                    <a href="#l--liskov-substitution-principle-lsp" aria-label="L – Liskov Substitution Principle (LSP)"><strong>L</strong> – Liskov Substitution Principle (LSP)</a></li>
                <li>
                    <a href="#i--interface-segregation-principle-isp" aria-label="I – Interface Segregation Principle (ISP)"><strong>I</strong> – Interface Segregation Principle (ISP)</a><ul>
                        
                <li>
                    <a href="#%c4%91%e1%bb%8dc-th%c3%aam-1" aria-label="Đọc thêm">Đọc thêm</a></li></ul>
                </li>
                <li>
                    <a href="#d--dependency-inversion-principle-dip" aria-label="D – Dependency Inversion Principle (DIP)"><strong>D</strong> – Dependency Inversion Principle (DIP)</a><ul>
                        
                <li>
                    <a href="#%c4%91%e1%bb%8dc-th%c3%aam-2" aria-label="Đọc thêm">Đọc thêm</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="solid">SOLID<a hidden class="anchor" aria-hidden="true" href="#solid">¶</a></h1>
<p>Là tập hợp 5 nguyên lý thiết kế phần mềm giúp lập trình viên viết mã nguồn dễ bảo trì, mở rộng và ổn định hơn.</p>
<h2 id="s--single-responsibility-principle-srp"><strong>S</strong> – Single Responsibility Principle (SRP)<a hidden class="anchor" aria-hidden="true" href="#s--single-responsibility-principle-srp">¶</a></h2>
<blockquote>
<p>&ldquo;A module should be responsible to one, and only one, actor.&rdquo; <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">(wikipedia)</a></p>
</blockquote>
<ul>
<li>Một class nên có trách nhiệm cho một và chỉ một tác nhân. Hay nói cách khác, một class nên có một và chỉ một lý do thay đổi.</li>
</ul>
<p>Ví dụ một đối tượng Trade phải chịu trách nhiệm xử lý dữ liệu và lưu trữ. Ta nên tách ra thành 2 type khác nhau (Repository và Validator, tương ứng với 2 nhiệm vụ). Bằng cách tách các mối quan tâm này, mỗi đối tượng có thể được kiểm tra và duy trì dễ dàng hơn.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Trade</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">TradeID</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Symbol</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Quantity</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Price</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TradeRepository</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span> <span class="o">*</span><span class="nx">sql</span><span class="p">.</span><span class="nx">DB</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">tr</span> <span class="o">*</span><span class="nx">TradeRepository</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">tr</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nf">Exec</span><span class="p">(</span><span class="s">&#34;INSERT INTO trades (trade_id, symbol, quantity, price) VALUES (?, ?, ?, ?)&#34;</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">TradeID</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Symbol</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Quantity</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TradeValidator</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">tv</span> <span class="o">*</span><span class="nx">TradeValidator</span><span class="p">)</span> <span class="nf">Validate</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Quantity</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;Trade quantity must be greater than zero&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Price</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;Trade price must be greater than zero&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="đọc-thêm">Đọc thêm<a hidden class="anchor" aria-hidden="true" href="#đọc-thêm">¶</a></h3>
<ul>
<li><a href="https://threedots.tech/post/things-to-know-about-dry/">When to avoid DRY in Go</a></li>
<li><a href="https://softwaredesign.vn/srp-s-trong-solid">SRP - &ldquo;S&rdquo; trong SOLID</a></li>
</ul>
<h2 id="o--open-closed-principle"><strong>O</strong> – Open-closed Principle<a hidden class="anchor" aria-hidden="true" href="#o--open-closed-principle">¶</a></h2>
<blockquote>
<p>&ldquo;Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.&rdquo; <a href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle">(wikipedia)</a></p>
</blockquote>
<ul>
<li>Các entity nên mở để mở rộng nhưng đóng để sửa đổi. Có thể hiểu đơn giản rằng chúng ta cần hạn chế tối đa sửa code cũ, mà ưu tiên mở rộng, và “thay thế” nếu có thể.</li>
</ul>
<p>Ví dụ ta có thể định nghĩa 1 interface TradeProcessor với method Process. Nếu một loại Processor mới được thêm vào, TradeProcessor có thể xử lý mà không cần thay đổi code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TradeProcessor</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FutureTradeProcessor</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">ftp</span> <span class="o">*</span><span class="nx">FutureTradeProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// process future trade
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OptionTradeProcessor</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">otp</span> <span class="o">*</span><span class="nx">OptionTradeProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// process option trade
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="l--liskov-substitution-principle-lsp"><strong>L</strong> – Liskov Substitution Principle (LSP)<a hidden class="anchor" aria-hidden="true" href="#l--liskov-substitution-principle-lsp">¶</a></h2>
<blockquote>
<p>&ldquo;An object (such as a class) may be replaced by a sub-object (such as a class that extends the first class) without breaking the program.&rdquo; <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">(wikipedia)</a></p>
</blockquote>
<ul>
<li>Hiểu một cách đơn giản, class cha có hành vi gì, thì class con phải có đầy đủ có hành vi đó. Nghĩa là ta có thể thay thế class cha bằng class con mà hoàn toàn không phá vỡ ứng dụng của mình.</li>
</ul>
<p>Ví dụ FutureTrade là một subtype của Trade. Điều đó có nghĩa là FutureTrade sẽ có thể được sử dụng thay cho Trade mà không gây ra bất kỳ vấn đề nào.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Trade</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">()</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FutureTrade</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Trade</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">ft</span> <span class="o">*</span><span class="nx">FutureTrade</span><span class="p">)</span> <span class="nf">Process</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// process future trade
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="i--interface-segregation-principle-isp"><strong>I</strong> – Interface Segregation Principle (ISP)<a hidden class="anchor" aria-hidden="true" href="#i--interface-segregation-principle-isp">¶</a></h2>
<blockquote>
<p>&ldquo;Clients should not be forced to depend upon interfaces that they do not use.&rdquo; <a href="https://en.wikipedia.org/wiki/Interface_segregation_principle">(wikipedia)</a></p>
</blockquote>
<ul>
<li>Client chỉ nên phụ thuộc vào những gì mà nó cần. Khi triển khai các interface, đừng làm nó trở nên quá “rộng” và cover mọi trường hợp. Hãy thu hẹp nó làm sao để các class con không cần triển khai các hành vi mà nó không cần.</li>
</ul>
<h3 id="đọc-thêm-1">Đọc thêm<a hidden class="anchor" aria-hidden="true" href="#đọc-thêm-1">¶</a></h3>
<ul>
<li><a href="https://softwaredesign.vn/common-reuse-principle-crp">Common Reuse Principle - CRP</a></li>
</ul>
<h2 id="d--dependency-inversion-principle-dip"><strong>D</strong> – Dependency Inversion Principle (DIP)<a hidden class="anchor" aria-hidden="true" href="#d--dependency-inversion-principle-dip">¶</a></h2>
<blockquote>
<p>&ldquo;High-level modules should not import anything from low-level modules. Both should depend on abstractions (e.g., interfaces).&rdquo;</p>
<p>&ldquo;Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.&rdquo; <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">(wikipedia)</a></p>
</blockquote>
<ul>
<li>
<p>Module cấp cao không nên phụ thuộc vào bất cứ thứ gì trong các module cấp thấp. Cả hai nên phụ thuộc vào các trừu tượng.</p>
</li>
<li>
<p>Trừu tượng không nên phụ thuộc vào chi tiết. Chi tiết nên phụ thuộc vào trừu tượng.</p>
</li>
</ul>
<p>Ví dụ TradeProcessor phụ thuộc vào interface TradeService, thay vì thực hiện cụ thể SqlServerTradeRepository. Bằng cách này, các triển khai khác nhau của TradeService interface có thể được hoán đổi mà không làm ảnh hưởng đến TradeProcessor. Ví dụ có thể sử dụng MongoDbTradeRepository mà không cần sửa đổi TradeProcessor.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TradeService</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TradeProcessor</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">tradeService</span> <span class="nx">TradeService</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">tp</span> <span class="o">*</span><span class="nx">TradeProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">tp</span><span class="p">.</span><span class="nx">tradeService</span><span class="p">.</span><span class="nf">Save</span><span class="p">(</span><span class="nx">trade</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// process trade
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">SqlServerTradeRepository</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span> <span class="o">*</span><span class="nx">sql</span><span class="p">.</span><span class="nx">DB</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">str</span> <span class="o">*</span><span class="nx">SqlServerTradeRepository</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nf">Exec</span><span class="p">(</span><span class="s">&#34;INSERT INTO trades (trade_id, symbol, quantity, price) VALUES (?, ?, ?, ?)&#34;</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">TradeID</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Symbol</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Quantity</span><span class="p">,</span> <span class="nx">trade</span><span class="p">.</span><span class="nx">Price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MongoDbTradeRepository</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">session</span> <span class="o">*</span><span class="nx">mgo</span><span class="p">.</span><span class="nx">Session</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">mdtr</span> <span class="o">*</span><span class="nx">MongoDbTradeRepository</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">trade</span> <span class="o">*</span><span class="nx">Trade</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">collection</span> <span class="o">:=</span> <span class="nx">mdtr</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nf">DB</span><span class="p">(</span><span class="s">&#34;trades&#34;</span><span class="p">).</span><span class="nf">C</span><span class="p">(</span><span class="s">&#34;trade&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">collection</span><span class="p">.</span><span class="nf">Insert</span><span class="p">(</span><span class="nx">trade</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="đọc-thêm-2">Đọc thêm<a hidden class="anchor" aria-hidden="true" href="#đọc-thêm-2">¶</a></h3>
<ul>
<li><a href="https://softwaredesign.vn/dependency-inversion-principle-dip">DIP - Chữ &ldquo;D&rdquo; trong SOLID (part 1)</a></li>
<li><a href="https://softwaredesign.vn/dip-chu-d-trong-solid-part-2">DIP - Chữ &ldquo;D&rdquo; trong SOLID (part 2)</a></li>
</ul>
<p>Các ví dụ được lấy từ bài viết <a href="https://dev.to/ansu/solid-principles-explained-with-golang-examples-5eh">SOLID Principles: Explained with Golang Examples</a>.</p>


  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2025 <a href="https://blog.huydang.dev/">Huy Dang Blog</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="../../js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
